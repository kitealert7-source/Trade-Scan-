# Trade_Scan State Machines --- Detailed View

## 1️⃣ Directive-Level FSM

``` mermaid
stateDiagram-v2
    [*] --> INITIALIZED
    INITIALIZED --> PREFLIGHT_COMPLETE
    PREFLIGHT_COMPLETE --> SYMBOL_RUNS_COMPLETE
    SYMBOL_RUNS_COMPLETE --> PORTFOLIO_COMPLETE
    INITIALIZED --> FAILED
    PREFLIGHT_COMPLETE --> FAILED
    SYMBOL_RUNS_COMPLETE --> FAILED
    PORTFOLIO_COMPLETE --> [*]
    FAILED --> [*]
```

------------------------------------------------------------------------

## 2️⃣ Per-Symbol Run FSM

``` mermaid
stateDiagram-v2
    [*] --> IDLE
    IDLE --> PREFLIGHT_START
    PREFLIGHT_START --> PREFLIGHT_COMPLETE
    PREFLIGHT_COMPLETE --> STAGE_1_START
    STAGE_1_START --> STAGE_1_COMPLETE
    STAGE_1_COMPLETE --> STAGE_2_START
    STAGE_2_START --> STAGE_2_COMPLETE
    STAGE_2_COMPLETE --> STAGE_3_START
    STAGE_3_START --> STAGE_3_COMPLETE
    STAGE_3_COMPLETE --> STAGE_3A_START
    STAGE_3A_START --> STAGE_3A_COMPLETE
    STAGE_3A_COMPLETE --> COMPLETE

    IDLE --> FAILED
    PREFLIGHT_START --> FAILED
    PREFLIGHT_COMPLETE --> FAILED
    STAGE_1_START --> FAILED
    STAGE_1_COMPLETE --> FAILED
    STAGE_2_START --> FAILED
    STAGE_2_COMPLETE --> FAILED
    STAGE_3_START --> FAILED
    STAGE_3_COMPLETE --> FAILED
    STAGE_3A_START --> FAILED
    STAGE_3A_COMPLETE --> FAILED

    COMPLETE --> [*]
    FAILED --> [*]
```
